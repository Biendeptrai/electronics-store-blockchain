{"ast":null,"code":"import { ethers } from \"ethers\";\nimport ABI from \"../abi/WarrantyManager.json\"; // âœ… ABI CHUáº¨N\n\n// ðŸ”´ Äá»ŠA CHá»ˆ CONTRACT WarrantyManager ÄÃƒ DEPLOY (SEPOLIA)\nconst CONTRACT_ADDRESS = \"0xaCF40B794b91fd8601217045f0CF84Fc23056f7E\";\n\n/*\r\n  ================= GET CONTRACT =================\r\n*/\nconst getContract = async () => {\n  if (!window.ethereum) {\n    throw new Error(\"MetaMask chÆ°a Ä‘Æ°á»£c cÃ i\");\n  }\n  const provider = new ethers.BrowserProvider(window.ethereum);\n  const signer = await provider.getSigner();\n  return new ethers.Contract(CONTRACT_ADDRESS, ABI.abi,\n  // âš ï¸ Ráº¤T QUAN TRá»ŒNG (ethers v6)\n  signer);\n};\n\n/*\r\n  ================= READ: orderCount =================\r\n*/\nexport const getOrderCount = async () => {\n  const contract = await getContract();\n  return await contract.orderCount();\n};\n\n/*\r\n  ================= READ: getOrderByIndex =================\r\n*/\nexport const getOrderByIndex = async index => {\n  const contract = await getContract();\n  const result = await contract.getOrderByIndex(index);\n  return {\n    orderId: result[0],\n    productId: result[1],\n    amountVND: result[2],\n    buyer: result[3],\n    createdAt: result[4]\n  };\n};\n\n/*\r\n  ================= WRITE: createOrder =================\r\n*/\nexport const createOrder = async (productId, amountVND) => {\n  const contract = await getContract();\n  const tx = await contract.createOrder(productId, amountVND);\n  await tx.wait();\n  return tx.hash;\n};","map":{"version":3,"names":["ethers","ABI","CONTRACT_ADDRESS","getContract","window","ethereum","Error","provider","BrowserProvider","signer","getSigner","Contract","abi","getOrderCount","contract","orderCount","getOrderByIndex","index","result","orderId","productId","amountVND","buyer","createdAt","createOrder","tx","wait","hash"],"sources":["D:/Congnghechuoikhoi/electronics-store-blockchain/frontend/src/services/blockchain.js"],"sourcesContent":["import { ethers } from \"ethers\";\r\nimport ABI from \"../abi/WarrantyManager.json\"; // âœ… ABI CHUáº¨N\r\n\r\n// ðŸ”´ Äá»ŠA CHá»ˆ CONTRACT WarrantyManager ÄÃƒ DEPLOY (SEPOLIA)\r\nconst CONTRACT_ADDRESS = \"0xaCF40B794b91fd8601217045f0CF84Fc23056f7E\";\r\n\r\n/*\r\n  ================= GET CONTRACT =================\r\n*/\r\nconst getContract = async () => {\r\n  if (!window.ethereum) {\r\n    throw new Error(\"MetaMask chÆ°a Ä‘Æ°á»£c cÃ i\");\r\n  }\r\n\r\n  const provider = new ethers.BrowserProvider(window.ethereum);\r\n  const signer = await provider.getSigner();\r\n\r\n  return new ethers.Contract(\r\n    CONTRACT_ADDRESS,\r\n    ABI.abi, // âš ï¸ Ráº¤T QUAN TRá»ŒNG (ethers v6)\r\n    signer\r\n  );\r\n};\r\n\r\n/*\r\n  ================= READ: orderCount =================\r\n*/\r\nexport const getOrderCount = async () => {\r\n  const contract = await getContract();\r\n  return await contract.orderCount();\r\n};\r\n\r\n/*\r\n  ================= READ: getOrderByIndex =================\r\n*/\r\nexport const getOrderByIndex = async (index) => {\r\n  const contract = await getContract();\r\n\r\n  const result = await contract.getOrderByIndex(index);\r\n\r\n  return {\r\n    orderId: result[0],\r\n    productId: result[1],\r\n    amountVND: result[2],\r\n    buyer: result[3],\r\n    createdAt: result[4]\r\n  };\r\n};\r\n\r\n/*\r\n  ================= WRITE: createOrder =================\r\n*/\r\nexport const createOrder = async (productId, amountVND) => {\r\n  const contract = await getContract();\r\n\r\n  const tx = await contract.createOrder(productId, amountVND);\r\n  await tx.wait();\r\n\r\n  return tx.hash;\r\n};"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,GAAG,MAAM,6BAA6B,CAAC,CAAC;;AAE/C;AACA,MAAMC,gBAAgB,GAAG,4CAA4C;;AAErE;AACA;AACA;AACA,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EAC9B,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE;IACpB,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;EAC3C;EAEA,MAAMC,QAAQ,GAAG,IAAIP,MAAM,CAACQ,eAAe,CAACJ,MAAM,CAACC,QAAQ,CAAC;EAC5D,MAAMI,MAAM,GAAG,MAAMF,QAAQ,CAACG,SAAS,CAAC,CAAC;EAEzC,OAAO,IAAIV,MAAM,CAACW,QAAQ,CACxBT,gBAAgB,EAChBD,GAAG,CAACW,GAAG;EAAE;EACTH,MACF,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMI,aAAa,GAAG,MAAAA,CAAA,KAAY;EACvC,MAAMC,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EACpC,OAAO,MAAMW,QAAQ,CAACC,UAAU,CAAC,CAAC;AACpC,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,eAAe,GAAG,MAAOC,KAAK,IAAK;EAC9C,MAAMH,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EAEpC,MAAMe,MAAM,GAAG,MAAMJ,QAAQ,CAACE,eAAe,CAACC,KAAK,CAAC;EAEpD,OAAO;IACLE,OAAO,EAAED,MAAM,CAAC,CAAC,CAAC;IAClBE,SAAS,EAAEF,MAAM,CAAC,CAAC,CAAC;IACpBG,SAAS,EAAEH,MAAM,CAAC,CAAC,CAAC;IACpBI,KAAK,EAAEJ,MAAM,CAAC,CAAC,CAAC;IAChBK,SAAS,EAAEL,MAAM,CAAC,CAAC;EACrB,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMM,WAAW,GAAG,MAAAA,CAAOJ,SAAS,EAAEC,SAAS,KAAK;EACzD,MAAMP,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EAEpC,MAAMsB,EAAE,GAAG,MAAMX,QAAQ,CAACU,WAAW,CAACJ,SAAS,EAAEC,SAAS,CAAC;EAC3D,MAAMI,EAAE,CAACC,IAAI,CAAC,CAAC;EAEf,OAAOD,EAAE,CAACE,IAAI;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
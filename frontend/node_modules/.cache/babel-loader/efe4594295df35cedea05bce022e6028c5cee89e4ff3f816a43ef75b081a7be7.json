{"ast":null,"code":"import { ethers } from \"ethers\";\nimport ABI from \"../abi/WarrantyManager.json\";\n\n// ðŸ”´ CONTRACT DEPLOY TRÃŠN SEPOLIA (ÄÃšNG)\nconst CONTRACT_ADDRESS = \"0xec70714Fb3cf41Ab01894786b9DCaf97b75F5635\";\n\n/* ================= GET CONTRACT ================= */\nconst getContract = async () => {\n  if (!window.ethereum) {\n    throw new Error(\"MetaMask chÆ°a Ä‘Æ°á»£c cÃ i\");\n  }\n\n  // âš ï¸ ethers v6\n  const provider = new ethers.BrowserProvider(window.ethereum);\n  const signer = await provider.getSigner();\n  return new ethers.Contract(CONTRACT_ADDRESS, ABI.abi, signer);\n};\n\n/* ================= READ: owner (ADMIN) ================= */\nexport const getOwner = async () => {\n  const contract = await getContract();\n  const owner = await contract.owner();\n  return owner;\n};\n\n/* ================= READ: orderCount ================= */\nexport const getOrderCount = async () => {\n  const contract = await getContract();\n  const count = await contract.orderCount();\n  return Number(count); // âš ï¸ convert BigInt â†’ number\n};\n\n/* ================= READ: getOrderByIndex ================= */\nexport const getOrderByIndex = async index => {\n  const contract = await getContract();\n  const o = await contract.getOrderByIndex(index);\n  return {\n    orderId: Number(o[0]),\n    productId: Number(o[1]),\n    amountVND: Number(o[2]),\n    buyer: o[3],\n    createdAt: Number(o[4])\n  };\n};\n\n/* ================= WRITE: createOrder (ADMIN ONLY) ================= */\nexport const createOrder = async (productId, amountVND, buyer) => {\n  const contract = await getContract();\n  const tx = await contract.createOrder(Number(productId), Number(amountVND), buyer);\n  await tx.wait();\n  return tx.hash;\n};","map":{"version":3,"names":["ethers","ABI","CONTRACT_ADDRESS","getContract","window","ethereum","Error","provider","BrowserProvider","signer","getSigner","Contract","abi","getOwner","contract","owner","getOrderCount","count","orderCount","Number","getOrderByIndex","index","o","orderId","productId","amountVND","buyer","createdAt","createOrder","tx","wait","hash"],"sources":["E:/Blockchain/electronics-store-blockchain/electronics-store-blockchain/frontend/src/services/blockchain.js"],"sourcesContent":["import { ethers } from \"ethers\";\r\nimport ABI from \"../abi/WarrantyManager.json\";\r\n\r\n// ðŸ”´ CONTRACT DEPLOY TRÃŠN SEPOLIA (ÄÃšNG)\r\nconst CONTRACT_ADDRESS = \"0xec70714Fb3cf41Ab01894786b9DCaf97b75F5635\";\r\n\r\n/* ================= GET CONTRACT ================= */\r\nconst getContract = async () => {\r\n  if (!window.ethereum) {\r\n    throw new Error(\"MetaMask chÆ°a Ä‘Æ°á»£c cÃ i\");\r\n  }\r\n\r\n  // âš ï¸ ethers v6\r\n  const provider = new ethers.BrowserProvider(window.ethereum);\r\n  const signer = await provider.getSigner();\r\n\r\n  return new ethers.Contract(\r\n    CONTRACT_ADDRESS,\r\n    ABI.abi,\r\n    signer\r\n  );\r\n};\r\n\r\n/* ================= READ: owner (ADMIN) ================= */\r\nexport const getOwner = async () => {\r\n  const contract = await getContract();\r\n  const owner = await contract.owner();\r\n  return owner;\r\n};\r\n\r\n/* ================= READ: orderCount ================= */\r\nexport const getOrderCount = async () => {\r\n  const contract = await getContract();\r\n  const count = await contract.orderCount();\r\n  return Number(count); // âš ï¸ convert BigInt â†’ number\r\n};\r\n\r\n/* ================= READ: getOrderByIndex ================= */\r\nexport const getOrderByIndex = async (index) => {\r\n  const contract = await getContract();\r\n  const o = await contract.getOrderByIndex(index);\r\n\r\n  return {\r\n    orderId: Number(o[0]),\r\n    productId: Number(o[1]),\r\n    amountVND: Number(o[2]),\r\n    buyer: o[3],\r\n    createdAt: Number(o[4])\r\n  };\r\n};\r\n\r\n/* ================= WRITE: createOrder (ADMIN ONLY) ================= */\r\nexport const createOrder = async (productId, amountVND, buyer) => {\r\n  const contract = await getContract();\r\n\r\n  const tx = await contract.createOrder(\r\n    Number(productId),\r\n    Number(amountVND),\r\n    buyer\r\n  );\r\n\r\n  await tx.wait();\r\n  return tx.hash;\r\n};"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,GAAG,MAAM,6BAA6B;;AAE7C;AACA,MAAMC,gBAAgB,GAAG,4CAA4C;;AAErE;AACA,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EAC9B,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE;IACpB,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;EAC3C;;EAEA;EACA,MAAMC,QAAQ,GAAG,IAAIP,MAAM,CAACQ,eAAe,CAACJ,MAAM,CAACC,QAAQ,CAAC;EAC5D,MAAMI,MAAM,GAAG,MAAMF,QAAQ,CAACG,SAAS,CAAC,CAAC;EAEzC,OAAO,IAAIV,MAAM,CAACW,QAAQ,CACxBT,gBAAgB,EAChBD,GAAG,CAACW,GAAG,EACPH,MACF,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMI,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAClC,MAAMC,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EACpC,MAAMY,KAAK,GAAG,MAAMD,QAAQ,CAACC,KAAK,CAAC,CAAC;EACpC,OAAOA,KAAK;AACd,CAAC;;AAED;AACA,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;EACvC,MAAMF,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EACpC,MAAMc,KAAK,GAAG,MAAMH,QAAQ,CAACI,UAAU,CAAC,CAAC;EACzC,OAAOC,MAAM,CAACF,KAAK,CAAC,CAAC,CAAC;AACxB,CAAC;;AAED;AACA,OAAO,MAAMG,eAAe,GAAG,MAAOC,KAAK,IAAK;EAC9C,MAAMP,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EACpC,MAAMmB,CAAC,GAAG,MAAMR,QAAQ,CAACM,eAAe,CAACC,KAAK,CAAC;EAE/C,OAAO;IACLE,OAAO,EAAEJ,MAAM,CAACG,CAAC,CAAC,CAAC,CAAC,CAAC;IACrBE,SAAS,EAAEL,MAAM,CAACG,CAAC,CAAC,CAAC,CAAC,CAAC;IACvBG,SAAS,EAAEN,MAAM,CAACG,CAAC,CAAC,CAAC,CAAC,CAAC;IACvBI,KAAK,EAAEJ,CAAC,CAAC,CAAC,CAAC;IACXK,SAAS,EAAER,MAAM,CAACG,CAAC,CAAC,CAAC,CAAC;EACxB,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMM,WAAW,GAAG,MAAAA,CAAOJ,SAAS,EAAEC,SAAS,EAAEC,KAAK,KAAK;EAChE,MAAMZ,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EAEpC,MAAM0B,EAAE,GAAG,MAAMf,QAAQ,CAACc,WAAW,CACnCT,MAAM,CAACK,SAAS,CAAC,EACjBL,MAAM,CAACM,SAAS,CAAC,EACjBC,KACF,CAAC;EAED,MAAMG,EAAE,CAACC,IAAI,CAAC,CAAC;EACf,OAAOD,EAAE,CAACE,IAAI;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
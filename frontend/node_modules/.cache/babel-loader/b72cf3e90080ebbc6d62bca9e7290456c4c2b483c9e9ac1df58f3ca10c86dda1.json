{"ast":null,"code":"import { ethers } from \"ethers\";\nimport abi from \"../abi.json\"; // ‚úÖ ABI ƒë·∫∑t tr·ª±c ti·∫øp trong src\n\n// üî¥ THAY b·∫±ng ƒë·ªãa ch·ªâ contract ElectronicsStore ƒë√£ deploy (Sepolia)\nconst CONTRACT_ADDRESS = \"0xaCF40B794b91fd8601217045f0CF84Fc23056f7E\";\n\n/*\r\n  L·∫•y instance c·ªßa smart contract\r\n*/\nconst getContract = async () => {\n  if (!window.ethereum) {\n    throw new Error(\"MetaMask not found\");\n  }\n  const provider = new ethers.BrowserProvider(window.ethereum);\n  const signer = await provider.getSigner();\n  return new ethers.Contract(CONTRACT_ADDRESS, abi, signer);\n};\n\n/*\r\n  üî• L·∫§Y T·ªîNG S·ªê ORDER (orderCount)\r\n*/\nexport const getOrderCount = async () => {\n  const contract = await getContract();\n  return await contract.orderCount();\n};\n\n/*\r\n  üî• L·∫§Y 1 ORDER THEO INDEX\r\n  orders(uint256)\r\n*/\nexport const getOrderByIndex = async index => {\n  const contract = await getContract();\n  return await contract.orders(index);\n};\n\n/*\r\n  üî• GHI ORDER L√äN BLOCKCHAIN\r\n*/\nexport const recordOrder = async (productId, amountVND, buyer, offchainTx) => {\n  const contract = await getContract();\n  const tx = await contract.recordOrder(productId, amountVND, buyer, offchainTx);\n  await tx.wait(); // ch·ªù block confirm\n  return tx.hash;\n};","map":{"version":3,"names":["ethers","abi","CONTRACT_ADDRESS","getContract","window","ethereum","Error","provider","BrowserProvider","signer","getSigner","Contract","getOrderCount","contract","orderCount","getOrderByIndex","index","orders","recordOrder","productId","amountVND","buyer","offchainTx","tx","wait","hash"],"sources":["D:/Congnghechuoikhoi/electronics-store-blockchain/frontend/src/services/blockchain.js"],"sourcesContent":["import { ethers } from \"ethers\";\r\nimport abi from \"../abi.json\"; // ‚úÖ ABI ƒë·∫∑t tr·ª±c ti·∫øp trong src\r\n\r\n// üî¥ THAY b·∫±ng ƒë·ªãa ch·ªâ contract ElectronicsStore ƒë√£ deploy (Sepolia)\r\nconst CONTRACT_ADDRESS = \"0xaCF40B794b91fd8601217045f0CF84Fc23056f7E\";\r\n\r\n/*\r\n  L·∫•y instance c·ªßa smart contract\r\n*/\r\nconst getContract = async () => {\r\n  if (!window.ethereum) {\r\n    throw new Error(\"MetaMask not found\");\r\n  }\r\n\r\n  const provider = new ethers.BrowserProvider(window.ethereum);\r\n  const signer = await provider.getSigner();\r\n\r\n  return new ethers.Contract(\r\n    CONTRACT_ADDRESS,\r\n    abi,\r\n    signer\r\n  );\r\n};\r\n\r\n/*\r\n  üî• L·∫§Y T·ªîNG S·ªê ORDER (orderCount)\r\n*/\r\nexport const getOrderCount = async () => {\r\n  const contract = await getContract();\r\n  return await contract.orderCount();\r\n};\r\n\r\n/*\r\n  üî• L·∫§Y 1 ORDER THEO INDEX\r\n  orders(uint256)\r\n*/\r\nexport const getOrderByIndex = async (index) => {\r\n  const contract = await getContract();\r\n  return await contract.orders(index);\r\n};\r\n\r\n/*\r\n  üî• GHI ORDER L√äN BLOCKCHAIN\r\n*/\r\nexport const recordOrder = async (\r\n  productId,\r\n  amountVND,\r\n  buyer,\r\n  offchainTx\r\n) => {\r\n  const contract = await getContract();\r\n\r\n  const tx = await contract.recordOrder(\r\n    productId,\r\n    amountVND,\r\n    buyer,\r\n    offchainTx\r\n  );\r\n\r\n  await tx.wait(); // ch·ªù block confirm\r\n  return tx.hash;\r\n};"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,GAAG,MAAM,aAAa,CAAC,CAAC;;AAE/B;AACA,MAAMC,gBAAgB,GAAG,4CAA4C;;AAErE;AACA;AACA;AACA,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EAC9B,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE;IACpB,MAAM,IAAIC,KAAK,CAAC,oBAAoB,CAAC;EACvC;EAEA,MAAMC,QAAQ,GAAG,IAAIP,MAAM,CAACQ,eAAe,CAACJ,MAAM,CAACC,QAAQ,CAAC;EAC5D,MAAMI,MAAM,GAAG,MAAMF,QAAQ,CAACG,SAAS,CAAC,CAAC;EAEzC,OAAO,IAAIV,MAAM,CAACW,QAAQ,CACxBT,gBAAgB,EAChBD,GAAG,EACHQ,MACF,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMG,aAAa,GAAG,MAAAA,CAAA,KAAY;EACvC,MAAMC,QAAQ,GAAG,MAAMV,WAAW,CAAC,CAAC;EACpC,OAAO,MAAMU,QAAQ,CAACC,UAAU,CAAC,CAAC;AACpC,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMC,eAAe,GAAG,MAAOC,KAAK,IAAK;EAC9C,MAAMH,QAAQ,GAAG,MAAMV,WAAW,CAAC,CAAC;EACpC,OAAO,MAAMU,QAAQ,CAACI,MAAM,CAACD,KAAK,CAAC;AACrC,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAME,WAAW,GAAG,MAAAA,CACzBC,SAAS,EACTC,SAAS,EACTC,KAAK,EACLC,UAAU,KACP;EACH,MAAMT,QAAQ,GAAG,MAAMV,WAAW,CAAC,CAAC;EAEpC,MAAMoB,EAAE,GAAG,MAAMV,QAAQ,CAACK,WAAW,CACnCC,SAAS,EACTC,SAAS,EACTC,KAAK,EACLC,UACF,CAAC;EAED,MAAMC,EAAE,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC;EACjB,OAAOD,EAAE,CAACE,IAAI;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
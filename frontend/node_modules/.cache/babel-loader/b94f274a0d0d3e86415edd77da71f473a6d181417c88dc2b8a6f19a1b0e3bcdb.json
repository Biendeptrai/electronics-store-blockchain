{"ast":null,"code":"import { ethers } from \"ethers\";\nimport ABI from \"../abi/WarrantyManager.json\";\n\n// ðŸ”´ Äá»ŠA CHá»ˆ CONTRACT SEPOLIA\nconst CONTRACT_ADDRESS = \"0xaCF40B794b91fd8601217045f0CF84Fc23056f7E\";\n\n/* ================= GET CONTRACT ================= */\nconst getContract = async () => {\n  if (!window.ethereum) {\n    throw new Error(\"MetaMask chÆ°a Ä‘Æ°á»£c cÃ i\");\n  }\n  const provider = new ethers.BrowserProvider(window.ethereum);\n  const signer = await provider.getSigner();\n  return new ethers.Contract(CONTRACT_ADDRESS, ABI.abi, signer);\n};\n\n/* ================= READ: owner (ADMIN) ================= */\nexport const getOwner = async () => {\n  const contract = await getContract();\n  return await contract.owner();\n};\n\n/* ================= READ: orderCount ================= */\nexport const getOrderCount = async () => {\n  const contract = await getContract();\n  const count = await contract.orderCount();\n  return Number(count); // âš ï¸ ráº¥t quan trá»ng\n};\n\n/* ================= READ: getOrderByIndex ================= */\nexport const getOrderByIndex = async index => {\n  const contract = await getContract();\n  const result = await contract.getOrderByIndex(index);\n  return {\n    orderId: Number(result[0]),\n    productId: Number(result[1]),\n    amountVND: Number(result[2]),\n    buyer: result[3],\n    createdAt: Number(result[4])\n  };\n};\n\n/* ================= WRITE: createOrder (ADMIN) ================= */\nexport const createOrder = async (productId, amountVND, buyer) => {\n  const contract = await getContract();\n  const tx = await contract.createOrder(productId, amountVND, buyer);\n  await tx.wait();\n  return tx.hash;\n};","map":{"version":3,"names":["ethers","ABI","CONTRACT_ADDRESS","getContract","window","ethereum","Error","provider","BrowserProvider","signer","getSigner","Contract","abi","getOwner","contract","owner","getOrderCount","count","orderCount","Number","getOrderByIndex","index","result","orderId","productId","amountVND","buyer","createdAt","createOrder","tx","wait","hash"],"sources":["E:/Blockchain/electronics-store-blockchain/electronics-store-blockchain/frontend/src/services/blockchain.js"],"sourcesContent":["import { ethers } from \"ethers\";\r\nimport ABI from \"../abi/WarrantyManager.json\";\r\n\r\n// ðŸ”´ Äá»ŠA CHá»ˆ CONTRACT SEPOLIA\r\nconst CONTRACT_ADDRESS = \"0xaCF40B794b91fd8601217045f0CF84Fc23056f7E\";\r\n\r\n/* ================= GET CONTRACT ================= */\r\nconst getContract = async () => {\r\n  if (!window.ethereum) {\r\n    throw new Error(\"MetaMask chÆ°a Ä‘Æ°á»£c cÃ i\");\r\n  }\r\n\r\n  const provider = new ethers.BrowserProvider(window.ethereum);\r\n  const signer = await provider.getSigner();\r\n\r\n  return new ethers.Contract(\r\n    CONTRACT_ADDRESS,\r\n    ABI.abi,\r\n    signer\r\n  );\r\n};\r\n\r\n/* ================= READ: owner (ADMIN) ================= */\r\nexport const getOwner = async () => {\r\n  const contract = await getContract();\r\n  return await contract.owner();\r\n};\r\n\r\n/* ================= READ: orderCount ================= */\r\nexport const getOrderCount = async () => {\r\n  const contract = await getContract();\r\n  const count = await contract.orderCount();\r\n  return Number(count); // âš ï¸ ráº¥t quan trá»ng\r\n};\r\n\r\n/* ================= READ: getOrderByIndex ================= */\r\nexport const getOrderByIndex = async (index) => {\r\n  const contract = await getContract();\r\n  const result = await contract.getOrderByIndex(index);\r\n\r\n  return {\r\n    orderId: Number(result[0]),\r\n    productId: Number(result[1]),\r\n    amountVND: Number(result[2]),\r\n    buyer: result[3],\r\n    createdAt: Number(result[4])\r\n  };\r\n};\r\n\r\n/* ================= WRITE: createOrder (ADMIN) ================= */\r\nexport const createOrder = async (productId, amountVND, buyer) => {\r\n  const contract = await getContract();\r\n\r\n  const tx = await contract.createOrder(\r\n    productId,\r\n    amountVND,\r\n    buyer\r\n  );\r\n\r\n  await tx.wait();\r\n  return tx.hash;\r\n};"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,GAAG,MAAM,6BAA6B;;AAE7C;AACA,MAAMC,gBAAgB,GAAG,4CAA4C;;AAErE;AACA,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EAC9B,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE;IACpB,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;EAC3C;EAEA,MAAMC,QAAQ,GAAG,IAAIP,MAAM,CAACQ,eAAe,CAACJ,MAAM,CAACC,QAAQ,CAAC;EAC5D,MAAMI,MAAM,GAAG,MAAMF,QAAQ,CAACG,SAAS,CAAC,CAAC;EAEzC,OAAO,IAAIV,MAAM,CAACW,QAAQ,CACxBT,gBAAgB,EAChBD,GAAG,CAACW,GAAG,EACPH,MACF,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMI,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAClC,MAAMC,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EACpC,OAAO,MAAMW,QAAQ,CAACC,KAAK,CAAC,CAAC;AAC/B,CAAC;;AAED;AACA,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;EACvC,MAAMF,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EACpC,MAAMc,KAAK,GAAG,MAAMH,QAAQ,CAACI,UAAU,CAAC,CAAC;EACzC,OAAOC,MAAM,CAACF,KAAK,CAAC,CAAC,CAAC;AACxB,CAAC;;AAED;AACA,OAAO,MAAMG,eAAe,GAAG,MAAOC,KAAK,IAAK;EAC9C,MAAMP,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EACpC,MAAMmB,MAAM,GAAG,MAAMR,QAAQ,CAACM,eAAe,CAACC,KAAK,CAAC;EAEpD,OAAO;IACLE,OAAO,EAAEJ,MAAM,CAACG,MAAM,CAAC,CAAC,CAAC,CAAC;IAC1BE,SAAS,EAAEL,MAAM,CAACG,MAAM,CAAC,CAAC,CAAC,CAAC;IAC5BG,SAAS,EAAEN,MAAM,CAACG,MAAM,CAAC,CAAC,CAAC,CAAC;IAC5BI,KAAK,EAAEJ,MAAM,CAAC,CAAC,CAAC;IAChBK,SAAS,EAAER,MAAM,CAACG,MAAM,CAAC,CAAC,CAAC;EAC7B,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMM,WAAW,GAAG,MAAAA,CAAOJ,SAAS,EAAEC,SAAS,EAAEC,KAAK,KAAK;EAChE,MAAMZ,QAAQ,GAAG,MAAMX,WAAW,CAAC,CAAC;EAEpC,MAAM0B,EAAE,GAAG,MAAMf,QAAQ,CAACc,WAAW,CACnCJ,SAAS,EACTC,SAAS,EACTC,KACF,CAAC;EAED,MAAMG,EAAE,CAACC,IAAI,CAAC,CAAC;EACf,OAAOD,EAAE,CAACE,IAAI;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}